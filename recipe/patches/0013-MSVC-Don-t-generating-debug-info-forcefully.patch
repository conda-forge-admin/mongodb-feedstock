From 31511fa25b19793f65ac5f3026210516404d033a Mon Sep 17 00:00:00 2001
From: Nehal J Wani <nehaljw.kkd1@gmail.com>
Date: Sat, 26 Sep 2020 16:05:30 -0400
Subject: [PATCH 13/16] MSVC: Don't generating debug info forcefully

---
 SConstruct | 34 +++++++++++++++++-----------------
 1 file changed, 17 insertions(+), 17 deletions(-)

diff --git a/SConstruct b/SConstruct
index db7c89d863..c58002624b 100644
--- a/SConstruct
+++ b/SConstruct
@@ -2357,11 +2357,11 @@ elif env.TargetOSIs('windows'):
     # Don't send error reports in case of internal compiler error
     env.Append( CCFLAGS= ["/errorReport:none"] )
 
-    # Select debugging format. /Zi gives faster links but seem to use more memory
-    if get_option('msvc-debugging-format') == "codeview":
-        env['CCPDBFLAGS'] = "/Z7"
-    elif get_option('msvc-debugging-format') == "pdb":
-        env['CCPDBFLAGS'] = '/Zi /Fd${TARGET}.pdb'
+#    # Select debugging format. /Zi gives faster links but seem to use more memory
+#    if get_option('msvc-debugging-format') == "codeview":
+#        env['CCPDBFLAGS'] = "/Z7"
+#    elif get_option('msvc-debugging-format') == "pdb":
+#        env['CCPDBFLAGS'] = '/Zi /Fd${TARGET}.pdb'
 
 
     # The SCons built-in pdbGenerator always adds /DEBUG, but we would like
@@ -2374,18 +2374,18 @@ elif env.TargetOSIs('windows'):
             return None
     env['_PDB'] = pdbGenerator
 
-    # /DEBUG will tell the linker to create a .pdb file
-    # which WinDbg and Visual Studio will use to resolve
-    # symbols if you want to debug a release-mode image.
-    # Note that this means we can't do parallel links in the build.
-    #
-    # Please also note that this has nothing to do with _DEBUG or optimization.
-
-    # If the user set a /DEBUG flag explicitly, don't add
-    # another. Otherwise use the standard /DEBUG flag, since we always
-    # want PDBs.
-    if not any(flag.startswith('/DEBUG') for flag in env['LINKFLAGS']):
-        env.Append(LINKFLAGS=["/DEBUG"])
+#    # /DEBUG will tell the linker to create a .pdb file
+#    # which WinDbg and Visual Studio will use to resolve
+#    # symbols if you want to debug a release-mode image.
+#    # Note that this means we can't do parallel links in the build.
+#    #
+#    # Please also note that this has nothing to do with _DEBUG or optimization.
+#
+#    # If the user set a /DEBUG flag explicitly, don't add
+#    # another. Otherwise use the standard /DEBUG flag, since we always
+#    # want PDBs.
+#    if not any(flag.startswith('/DEBUG') for flag in env['LINKFLAGS']):
+#        env.Append(LINKFLAGS=["/DEBUG"])
 
     if optBuild:
         # /O1:  optimize for size
-- 
2.31.1

